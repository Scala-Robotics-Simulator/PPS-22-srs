"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[2780],{2836:(e,i,n)=>{n.d(i,{A:()=>l});const l=n.p+"assets/images/logic-bc766e641eb7de82bf7c62903f5af4fa.png"},3961:(e,i,n)=>{n.d(i,{A:()=>l});const l=n.p+"assets/images/view-module-0512ef4a1705db60044fb87e028e7aac.png"},4832:(e,i,n)=>{n.d(i,{A:()=>l});const l=n.p+"assets/images/model-module-f154db255489c008b8fbd1fd854df71c.png"},5706:(e,i,n)=>{n.d(i,{A:()=>l});const l=n.p+"assets/images/protocol-message-840e316a83857125da12657ef237331f.png"},7413:(e,i,n)=>{n.d(i,{A:()=>l});const l=n.p+"assets/images/state-4009e6ccbee77796cca10f72df2ad723.png"},7692:(e,i,n)=>{n.r(i),n.d(i,{assets:()=>t,contentTitle:()=>a,default:()=>h,frontMatter:()=>d,metadata:()=>l,toc:()=>r});const l=JSON.parse('{"id":"detailed-design/mvc-simulation-core","title":"MVC e Simulation Core","description":"In questa sezione viene presentato il design di dettaglio del Model, View e Controller della simulazione.","source":"@site/docs/04-detailed-design/03-mvc-simulation-core.md","sourceDirName":"04-detailed-design","slug":"/detailed-design/mvc-simulation-core","permalink":"/PPS-22-srs/docs/detailed-design/mvc-simulation-core","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"sidebar_position":3},"sidebar":"docsSidebar","previous":{"title":"Entry Point","permalink":"/PPS-22-srs/docs/detailed-design/entry-point"},"next":{"title":"Environment","permalink":"/PPS-22-srs/docs/detailed-design/environment"}}');var s=n(4848),o=n(8453);const d={sidebar_position:3},a="MVC e Simulation Core",t={},r=[{value:"Model",id:"model",level:2},{value:"Definizione dello stato",id:"definizione-dello-stato",level:3},{value:"SimulationSpeed",id:"simulationspeed",level:4},{value:"SimulationStatus",id:"simulationstatus",level:4},{value:"Logica di aggiornamento dello stato",id:"logica-di-aggiornamento-dello-stato",level:3},{value:"Controller",id:"controller",level:2},{value:"Avvio della simulazione",id:"avvio-della-simulazione",level:3},{value:"Ciclo di simulazione",id:"ciclo-di-simulazione",level:3},{value:"Gestione degli eventi",id:"gestione-degli-eventi",level:3},{value:"LogicsBundle",id:"logicsbundle",level:3},{value:"View",id:"view",level:2}];function c(e){const i={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",img:"img",li:"li",p:"p",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,o.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(i.header,{children:(0,s.jsx)(i.h1,{id:"mvc-e-simulation-core",children:"MVC e Simulation Core"})}),"\n",(0,s.jsxs)(i.p,{children:["In questa sezione viene presentato il design di dettaglio del ",(0,s.jsx)(i.code,{children:"Model"}),", ",(0,s.jsx)(i.code,{children:"View"})," e ",(0,s.jsx)(i.code,{children:"Controller"})," della simulazione."]}),"\n",(0,s.jsx)(i.h2,{id:"model",children:"Model"}),"\n",(0,s.jsx)(i.p,{children:(0,s.jsx)(i.img,{alt:"ModelModule",src:n(4832).A+"",width:"2166",height:"1176"})}),"\n",(0,s.jsxs)(i.p,{children:["Il ",(0,s.jsx)(i.code,{children:"Model"})," \xe8 responsabile della gestione dello stato della simulazione in maniera funzionale e sicura.\nSi occupa di applicare le logiche di aggiornamento dello stato in risposta agli eventi generati dal ",(0,s.jsx)(i.code,{children:"Controller"}),"."]}),"\n",(0,s.jsx)(i.h3,{id:"definizione-dello-stato",children:"Definizione dello stato"}),"\n",(0,s.jsx)(i.p,{children:(0,s.jsx)(i.img,{alt:"State",src:n(7413).A+"",width:"1596",height:"1605"})}),"\n",(0,s.jsxs)(i.p,{children:[(0,s.jsx)(i.code,{children:"State"})," definisce la struttura dello stato della simulazione, che comprende i seguenti campi:"]}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.code,{children:"simulationTime"}),": durata totale prevista (opzionale, per supportare simulazioni infinite);"]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.code,{children:"elapsedTime"}),": tempo trascorso dall\u2019inizio della simulazione;"]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.code,{children:"dt"}),": delta time della simulazione (intervallo temporale di ciascuno step);"]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.code,{children:"simulationSpeed"}),": velocit\xe0 corrente della simulazione;"]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.code,{children:"simulationRNG"}),": generatore di numeri casuali (",(0,s.jsx)(i.code,{children:"RNG"}),") usato per introdurre elementi stocastici nei comportamenti dei\nrobot;"]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.code,{children:"simulationStatus"}),": stato corrente della simulazione;"]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.code,{children:"environment"}),": rappresenta l\u2019ambiente della simulazione, contenente le entit\xe0 validate (di tipo ",(0,s.jsx)(i.code,{children:"ValidEnvironment"}),")."]}),"\n"]}),"\n",(0,s.jsx)(i.admonition,{type:"info",children:(0,s.jsxs)(i.p,{children:["Vedere la sezione ",(0,s.jsx)(i.a,{href:"/PPS-22-srs/docs/detailed-design/random-number-generator",children:"Generatore di numeri casuali"}),", ",(0,s.jsx)(i.a,{href:"/PPS-22-srs/docs/detailed-design/environment",children:"Environment"})," per\nmaggiori dettagli."]})}),"\n",(0,s.jsx)(i.h4,{id:"simulationspeed",children:"SimulationSpeed"}),"\n",(0,s.jsxs)(i.p,{children:[(0,s.jsx)(i.code,{children:"SimulationSpeed"})," definisce le possibili velocit\xe0 della simulazione:"]}),"\n",(0,s.jsxs)(i.table,{children:[(0,s.jsx)(i.thead,{children:(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.th,{children:"Valore"}),(0,s.jsx)(i.th,{children:"Descrizione"}),(0,s.jsx)(i.th,{children:"Tempo per tick"})]})}),(0,s.jsxs)(i.tbody,{children:[(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:(0,s.jsx)(i.code,{children:"SLOW"})}),(0,s.jsx)(i.td,{children:"Velocit\xe0 ridotta"}),(0,s.jsx)(i.td,{children:"200 ms"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:(0,s.jsx)(i.code,{children:"NORMAL"})}),(0,s.jsx)(i.td,{children:"Velocit\xe0 standard"}),(0,s.jsx)(i.td,{children:"100 ms"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:(0,s.jsx)(i.code,{children:"FAST"})}),(0,s.jsx)(i.td,{children:"Velocit\xe0 aumentata"}),(0,s.jsx)(i.td,{children:"10 ms"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:(0,s.jsx)(i.code,{children:"SUPERFAST"})}),(0,s.jsx)(i.td,{children:"Velocit\xe0 massima (headless mode)"}),(0,s.jsx)(i.td,{children:"0 ms"})]})]})]}),"\n",(0,s.jsx)(i.h4,{id:"simulationstatus",children:"SimulationStatus"}),"\n",(0,s.jsxs)(i.p,{children:[(0,s.jsx)(i.code,{children:"SimulationStatus"})," rappresenta i possibili stati della simulazione:"]}),"\n",(0,s.jsxs)(i.table,{children:[(0,s.jsx)(i.thead,{children:(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.th,{children:"Valore"}),(0,s.jsx)(i.th,{children:"Descrizione"})]})}),(0,s.jsxs)(i.tbody,{children:[(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:(0,s.jsx)(i.code,{children:"RUNNING"})}),(0,s.jsx)(i.td,{children:"Simulazione in esecuzione"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:(0,s.jsx)(i.code,{children:"PAUSED"})}),(0,s.jsx)(i.td,{children:"Simulazione in pausa"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:(0,s.jsx)(i.code,{children:"STOPPED"})}),(0,s.jsx)(i.td,{children:"Simulazione fermata manualmente"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:(0,s.jsx)(i.code,{children:"ELAPSED_TIME"})}),(0,s.jsx)(i.td,{children:"Raggiunto il tempo massimo previsto della simulazione"})]})]})]}),"\n",(0,s.jsx)(i.h3,{id:"logica-di-aggiornamento-dello-stato",children:"Logica di aggiornamento dello stato"}),"\n",(0,s.jsxs)(i.p,{children:["L\u2019interfaccia del ",(0,s.jsx)(i.code,{children:"Model"})," espone il metodo ",(0,s.jsx)(i.code,{children:"update"}),", che accetta lo stato corrente e una funzione di aggiornamento.\nQuesta funzione viene applicata per produrre un nuovo stato, garantendo cos\xec l\u2019immutabilit\xe0 e la consistenza della\nsimulazione."]}),"\n",(0,s.jsx)(i.admonition,{type:"info",children:(0,s.jsxs)(i.p,{children:["Per i dettagli di implementazione riguardante il ",(0,s.jsx)(i.strong,{children:"Model"}),", si rimanda alla\nsezione ",(0,s.jsx)(i.a,{href:"/PPS-22-srs/docs/implementation/giulia-nardicchia/mvc-implementation#modelmodule",children:"ModelModule"}),"."]})}),"\n",(0,s.jsx)(i.h2,{id:"controller",children:"Controller"}),"\n",(0,s.jsx)(i.p,{children:(0,s.jsx)(i.img,{alt:"ControllerModule",src:n(8611).A+"",width:"2886",height:"1176"})}),"\n",(0,s.jsxs)(i.p,{children:["Il ",(0,s.jsx)(i.code,{children:"Controller"})," ha il compito di orchestrare la simulazione, coordinando l\u2019interazione tra ",(0,s.jsx)(i.code,{children:"Model"})," e ",(0,s.jsx)(i.code,{children:"View"}),".\nLe sue responsabilit\xe0 principali sono:"]}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:"avviare la simulazione partendo da uno stato iniziale;"}),"\n",(0,s.jsx)(i.li,{children:"gestire il ciclo di esecuzione della simulazione;"}),"\n",(0,s.jsx)(i.li,{children:"elaborare gli eventi prodotti dal sistema o dai robot;"}),"\n",(0,s.jsxs)(i.li,{children:["aggiornare la ",(0,s.jsx)(i.code,{children:"View"})," in base allo stato corrente;"]}),"\n",(0,s.jsxs)(i.li,{children:["richiedere al ",(0,s.jsx)(i.code,{children:"Model"})," l\u2019applicazione delle logiche di aggiornamento appropriate."]}),"\n"]}),"\n",(0,s.jsx)(i.h3,{id:"avvio-della-simulazione",children:"Avvio della simulazione"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:"Inizializza le strutture necessarie alla gestione degli eventi."}),"\n",(0,s.jsxs)(i.li,{children:["Prepara la ",(0,s.jsx)(i.code,{children:"View"})," per la rappresentazione grafica."]}),"\n",(0,s.jsx)(i.li,{children:"Attiva i comportamenti dei robot per generare azioni iniziali."}),"\n"]}),"\n",(0,s.jsx)(i.h3,{id:"ciclo-di-simulazione",children:"Ciclo di simulazione"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:"Gestisce gli eventi ricevuti."}),"\n",(0,s.jsxs)(i.li,{children:["Aggiorna lo stato tramite il ",(0,s.jsx)(i.code,{children:"Model"}),"."]}),"\n",(0,s.jsxs)(i.li,{children:["Aggiorna la ",(0,s.jsx)(i.code,{children:"View"})," per riflettere lo stato corrente."]}),"\n",(0,s.jsx)(i.li,{children:"Controlla le condizioni di terminazione (stop manuale o tempo massimo raggiunto)."}),"\n"]}),"\n",(0,s.jsx)(i.h3,{id:"gestione-degli-eventi",children:"Gestione degli eventi"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:"Traduce gli eventi in funzioni di aggiornamento dello stato."}),"\n",(0,s.jsxs)(i.li,{children:["Delega al ",(0,s.jsx)(i.code,{children:"Model"})," l\u2019applicazione delle logiche di trasformazione (avanzamento del tempo, pausa, stop, azioni dei\nrobot, ecc.)."]}),"\n"]}),"\n",(0,s.jsxs)(i.p,{children:["Di seguito \xe8 illustrato il diagramma dei possibili eventi gestiti dal ",(0,s.jsx)(i.code,{children:"Controller"})," e un tipo di messaggio usato per\nutilit\xe0:"]}),"\n",(0,s.jsx)(i.p,{children:(0,s.jsx)(i.img,{alt:"Event and RobotProposal Protocol",src:n(5706).A+"",width:"2676",height:"879"})}),"\n",(0,s.jsx)(i.h3,{id:"logicsbundle",children:"LogicsBundle"}),"\n",(0,s.jsxs)(i.p,{children:["Per mantenere separata la business logic dal ",(0,s.jsx)(i.code,{children:"Controller"}),", le logiche di aggiornamento sono raccolte in un\n",(0,s.jsx)(i.code,{children:"LogicsBundle"}),", che contiene funzioni di:"]}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:"avanzamento del tempo;"}),"\n",(0,s.jsx)(i.li,{children:"gestione della velocit\xe0;"}),"\n",(0,s.jsx)(i.li,{children:"pausa/ripresa/stop della simulazione;"}),"\n",(0,s.jsx)(i.li,{children:"aggiornamento del generatore casuale;"}),"\n",(0,s.jsx)(i.li,{children:"applicazione delle azioni proposte dai robot."}),"\n"]}),"\n",(0,s.jsxs)(i.p,{children:["Il ",(0,s.jsx)(i.code,{children:"Controller"})," utilizza queste logiche per aggiornare lo stato in risposta agli eventi, delegando l\u2019effettiva\ntrasformazione al ",(0,s.jsx)(i.code,{children:"Model"}),"."]}),"\n",(0,s.jsxs)(i.p,{children:["Di seguito \xe8 riportato il diagramma ",(0,s.jsx)(i.code,{children:"LogicsBundle"}),":\n",(0,s.jsx)(i.img,{alt:"LogicsBundle UML",src:n(2836).A+"",width:"2676",height:"2319"})]}),"\n",(0,s.jsx)(i.admonition,{type:"info",children:(0,s.jsxs)(i.p,{children:["Per i dettagli di implementazione del ",(0,s.jsx)(i.strong,{children:"Controller"}),", si rimanda alla\nsezione ",(0,s.jsx)(i.a,{href:"/PPS-22-srs/docs/implementation/giulia-nardicchia/mvc-implementation#controllermodule",children:"ControllerModule"}),"."]})}),"\n",(0,s.jsx)(i.h2,{id:"view",children:"View"}),"\n",(0,s.jsx)(i.p,{children:(0,s.jsx)(i.img,{alt:"ViewModule",src:n(3961).A+"",width:"2886",height:"1176"})}),"\n",(0,s.jsxs)(i.p,{children:["La ",(0,s.jsx)(i.code,{children:"View"})," ha il compito di gestire la rappresentazione della simulazione e l\u2019interazione con l\u2019utente.\nLe responsabilit\xe0 principali della ",(0,s.jsx)(i.code,{children:"View"})," si possono sintetizzare in tre fasi:"]}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsxs)(i.li,{children:["inizializzazione:","\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:"prepara l\u2019interfaccia (grafica o testuale);"}),"\n",(0,s.jsx)(i.li,{children:"collega la coda degli eventi, in modo da permettere all\u2019utente o al sistema di inviare comandi alla simulazione;"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(i.li,{children:["aggiornamento:","\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsxs)(i.li,{children:["riceve lo stato corrente dal ",(0,s.jsx)(i.code,{children:"Controller"}),";"]}),"\n",(0,s.jsx)(i.li,{children:"visualizza l\u2019ambiente e le entit\xe0 aggiornate, riflettendo l\u2019evoluzione della simulazione in tempo reale;"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(i.li,{children:["terminazione:","\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:"chiude l\u2019interfaccia alla fine della simulazione (nel caso della modalit\xe0 grafica);"}),"\n",(0,s.jsx)(i.li,{children:"esegue azioni dedicate quando viene raggiunto il tempo massimo (ad esempio, mostrando l'ambiente dello stato finale)."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(i.p,{children:["In questo modo la ",(0,s.jsx)(i.code,{children:"View"})," resta un modulo indipendente e intercambiabile; quindi \xe8 possibile fornire diverse implementazioni (ad\nesempio CLI o GUI) senza alterare le logiche di simulazione."]}),"\n",(0,s.jsxs)(i.admonition,{type:"info",children:[(0,s.jsx)(i.p,{children:"Per ulteriori dettagli sull\u2019implementazione della:"}),(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.strong,{children:"View"}),", si rimanda alla\nsezione ",(0,s.jsx)(i.a,{href:"/PPS-22-srs/docs/implementation/giulia-nardicchia/mvc-implementation#viewmodule",children:"ViewModule"}),";"]}),"\n",(0,s.jsxs)(i.li,{children:["modalit\xe0 ",(0,s.jsx)(i.strong,{children:"CLI"}),", si veda la sezione ",(0,s.jsx)(i.a,{href:"/PPS-22-srs/docs/implementation/giulia-nardicchia/cli#clicomponent",children:"CLIComponent"}),"."]}),"\n",(0,s.jsxs)(i.li,{children:["modaili\xe0 ",(0,s.jsx)(i.strong,{children:"GUI"}),", si veda la sezione ",(0,s.jsx)(i.a,{href:"/PPS-22-srs/docs/implementation/david-cohen/simulation-gui",children:"SimulationView"}),"."]}),"\n"]})]})]})}function h(e={}){const{wrapper:i}={...(0,o.R)(),...e.components};return i?(0,s.jsx)(i,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}},8453:(e,i,n)=>{n.d(i,{R:()=>d,x:()=>a});var l=n(6540);const s={},o=l.createContext(s);function d(e){const i=l.useContext(o);return l.useMemo(function(){return"function"==typeof e?e(i):{...i,...e}},[i,e])}function a(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:d(e.components),l.createElement(o.Provider,{value:i},e.children)}},8611:(e,i,n)=>{n.d(i,{A:()=>l});const l=n.p+"assets/images/controller-module-ad945da4f28607fa0023e735cba75230.png"}}]);